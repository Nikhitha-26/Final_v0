{"ast":null,"code":"import { authService } from \"./authService\";\nconst API_BASE_URL = \"http://localhost:5000/api\";\nclass ApiService {\n  // General POST request wrapper\n  async makeRequest(endpoint, options = {}) {\n    const url = `${API_BASE_URL}${endpoint}`;\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...authService.getAuthHeaders(),\n        ...options.headers\n      },\n      ...options\n    };\n    const response = await fetch(url, config);\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({}));\n      throw new Error(error.detail || \"Request failed\");\n    }\n    return response.json();\n  }\n\n  // ---------- AI Endpoints ----------\n  async getRelevantWebsites(query) {\n    return this.makeRequest(\"/ai/websites\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        query\n      })\n    });\n  }\n  async getProjectSuggestions(query) {\n    return this.makeRequest(\"/ai/suggestions\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        query\n      })\n    });\n  }\n  async improveIdea(idea) {\n    return this.makeRequest(\"/ai/improve\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        idea\n      })\n    });\n  }\n  async chatWithAI(message) {\n    return this.makeRequest(\"/ai/chat\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        message\n      })\n    });\n  }\n\n  // ---------- Search Endpoint ----------\n  async searchProjects(query) {\n    return this.makeRequest(\"/search/projects\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        query\n      })\n    });\n  }\n\n  // ---------- File Upload ----------\n  async uploadFile(file, title, description, student_name, student_id, abstract) {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"title\", title);\n    formData.append(\"description\", description);\n    formData.append(\"student_name\", student_name);\n    formData.append(\"student_id\", student_id);\n    formData.append(\"abstract\", abstract);\n    const token = localStorage.getItem(\"access_token\");\n    if (!token) {\n      throw new Error(\"Not authenticated: Please log in again.\");\n    }\n    console.log(\"Token used for upload:\", token);\n    const response = await fetch(`${API_BASE_URL}/files/upload`, {\n      method: \"POST\",\n      headers: {\n        Authorization: `Bearer ${token}`\n        // Do NOT set Content-Type for FormData; the browser does it\n      },\n      body: formData\n    });\n    if (response.status === 401) {\n      // Remove invalid token if unauthorized\n      localStorage.removeItem(\"access_token\");\n      localStorage.removeItem(\"user_data\");\n      throw new Error(\"Session expired or unauthorized. Please log in again.\");\n    }\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({}));\n      throw new Error(error.detail || \"File upload failed\");\n    }\n    return response.json();\n  }\n\n  // ---------- Get all submissions ----------\n  async getSubmissions() {\n    return this.makeRequest(\"/files/submissions\");\n  }\n\n  // ---------- Download file by ID or file_url ----------\n  async downloadFile(fileKey) {\n    const token = localStorage.getItem(\"access_token\");\n    if (!token) throw new Error(\"Not authenticated. Please log in again.\");\n    console.log(\"Token used for download:\", token);\n    const response = await fetch(`${API_BASE_URL}/files/download/${fileKey}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    if (response.status === 404) {\n      throw new Error(\"File not found\");\n    }\n    if (response.status === 401) {\n      throw new Error(\"Unauthorized. Please re-login.\");\n    }\n    if (!response.ok) {\n      throw new Error(\"Download failed\");\n    }\n    return response.blob();\n  }\n}\nexport const apiService = new ApiService();","map":{"version":3,"names":["authService","API_BASE_URL","ApiService","makeRequest","endpoint","options","url","config","headers","getAuthHeaders","response","fetch","ok","error","json","catch","Error","detail","getRelevantWebsites","query","method","body","JSON","stringify","getProjectSuggestions","improveIdea","idea","chatWithAI","message","searchProjects","uploadFile","file","title","description","student_name","student_id","abstract","formData","FormData","append","token","localStorage","getItem","console","log","Authorization","status","removeItem","getSubmissions","downloadFile","fileKey","blob","apiService"],"sources":["D:/p2/Project_market_place/Project_market_place/project_market_place/frontend/src/services/apiService.js"],"sourcesContent":["import { authService } from \"./authService\"\r\n\r\nconst API_BASE_URL = \"http://localhost:5000/api\"\r\n\r\nclass ApiService {\r\n  // General POST request wrapper\r\n  async makeRequest(endpoint, options = {}) {\r\n    const url = `${API_BASE_URL}${endpoint}`\r\n\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        ...authService.getAuthHeaders(),\r\n        ...options.headers,\r\n      },\r\n      ...options,\r\n    }\r\n\r\n    const response = await fetch(url, config)\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json().catch(() => ({}))\r\n      throw new Error(error.detail || \"Request failed\")\r\n    }\r\n\r\n    return response.json()\r\n  }\r\n\r\n  // ---------- AI Endpoints ----------\r\n  async getRelevantWebsites(query) {\r\n    return this.makeRequest(\"/ai/websites\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ query }),\r\n    })\r\n  }\r\n\r\n  async getProjectSuggestions(query) {\r\n    return this.makeRequest(\"/ai/suggestions\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ query }),\r\n    })\r\n  }\r\n\r\n  async improveIdea(idea) {\r\n    return this.makeRequest(\"/ai/improve\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ idea }),\r\n    })\r\n  }\r\n\r\n  async chatWithAI(message) {\r\n    return this.makeRequest(\"/ai/chat\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ message }),\r\n    })\r\n  }\r\n\r\n  // ---------- Search Endpoint ----------\r\n  async searchProjects(query) {\r\n    return this.makeRequest(\"/search/projects\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ query }),\r\n    })\r\n  }\r\n\r\n  // ---------- File Upload ----------\r\n  async uploadFile(file, title, description, student_name, student_id, abstract) {\r\n    const formData = new FormData()\r\n    formData.append(\"file\", file)\r\n    formData.append(\"title\", title)\r\n    formData.append(\"description\", description)\r\n    formData.append(\"student_name\", student_name)\r\n    formData.append(\"student_id\", student_id)\r\n    formData.append(\"abstract\", abstract)\r\n\r\n    const token = localStorage.getItem(\"access_token\")\r\n    if (!token) {\r\n      throw new Error(\"Not authenticated: Please log in again.\")\r\n    }\r\n\r\n    console.log(\"Token used for upload:\", token)\r\n\r\n    const response = await fetch(`${API_BASE_URL}/files/upload`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        // Do NOT set Content-Type for FormData; the browser does it\r\n      },\r\n      body: formData,\r\n    })\r\n\r\n    if (response.status === 401) {\r\n      // Remove invalid token if unauthorized\r\n      localStorage.removeItem(\"access_token\")\r\n      localStorage.removeItem(\"user_data\")\r\n      throw new Error(\"Session expired or unauthorized. Please log in again.\")\r\n    }\r\n\r\n    if (!response.ok) {\r\n      const error = await response.json().catch(() => ({}))\r\n      throw new Error(error.detail || \"File upload failed\")\r\n    }\r\n\r\n    return response.json()\r\n  }\r\n\r\n  // ---------- Get all submissions ----------\r\n  async getSubmissions() {\r\n    return this.makeRequest(\"/files/submissions\")\r\n  }\r\n\r\n  // ---------- Download file by ID or file_url ----------\r\n  async downloadFile(fileKey) {\r\n    const token = localStorage.getItem(\"access_token\")\r\n    if (!token) throw new Error(\"Not authenticated. Please log in again.\")\r\n\r\n    console.log(\"Token used for download:\", token)\r\n\r\n    const response = await fetch(`${API_BASE_URL}/files/download/${fileKey}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n\r\n    if (response.status === 404) {\r\n      throw new Error(\"File not found\")\r\n    }\r\n\r\n    if (response.status === 401) {\r\n      throw new Error(\"Unauthorized. Please re-login.\")\r\n    }\r\n\r\n    if (!response.ok) {\r\n      throw new Error(\"Download failed\")\r\n    }\r\n\r\n    return response.blob()\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService()\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}